<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIDE Top Rankings Sri Lanka</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand-color: #0062FF;
            --text-color: #333;
            --bg-color: #f9f9f9;
            --white: #ffffff;
            --border-color: #e0e0e0;
            --success-color: #2e7d32;
            --danger-color: #d32f2f;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        header {
            background-color: var(--brand-color);
            color: var(--white);
            padding: 1.2rem 0;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        h1 {
            font-size: 1.6rem;
            margin: 0;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        /* Filter Section */
        .filter-section {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 1rem;
            background-color: #fff;
            border-bottom: 1px solid #f0f0f0;
        }

        .filter-label {
            margin-right: 10px;
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }

        .custom-select {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #ccc;
            background-color: #fff;
            font-size: 0.9rem;
            font-family: inherit;
            color: #333;
            cursor: pointer;
            outline: none;
            transition: border-color 0.2s;
        }

        .custom-select:focus {
            border-color: var(--brand-color);
        }

        /* Ranking List Styles */
        .ranking-header {
            display: flex;
            align-items: center;
            background-color: #f1f3f5;
            font-weight: 700;
            padding: 1rem 0.5rem;
            border-bottom: 2px solid var(--border-color);
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #555;
        }

        .ranking-row {
            display: flex;
            align-items: center;
            padding: 0.9rem 0.5rem;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .ranking-row:hover {
            background-color: #eef6ff;
            transform: translateX(4px);
        }

        .ranking-row:last-child {
            border-bottom: none;
        }

        /* Column Widths */
        .col-rank { width: 10%; text-align: center; font-weight: 700; }
        .col-flag { width: 10%; text-align: center; }
        .col-title { width: 10%; text-align: center; color: var(--brand-color); font-weight: 600; font-size: 0.9rem; }
        .col-player { width: 55%; display: flex; align-items: center; gap: 12px; font-weight: 500; }
        .col-rating { width: 15%; text-align: center; font-weight: 700; }

        .player-img-list {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            background-color: #eee;
        }

        .flag-img {
            width: 24px;
            border-radius: 2px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* Mobile Optimization */
        @media (max-width: 600px) {
            .ranking-header, .ranking-row { padding: 0.8rem 0.3rem; font-size: 0.85rem; }
            .col-rank { width: 10%; }
            .col-flag { width: 12%; }
            .col-title { width: 12%; }
            .col-player { width: 46%; gap: 8px; }
            .col-rating { width: 20%; }
            
            .player-img-list { width: 32px; height: 32px; }
            .player-name-text { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100px; display: inline-block; }
            .filter-section { justify-content: space-between; }
        }

        /* Popup Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .profile-card {
            background: var(--white);
            width: 75%;
            max-width: 380px;
            border-radius: 16px;
            padding: 1.2rem;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: translateY(30px);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
        }

        .modal-overlay.active .profile-card {
            transform: translateY(0);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            line-height: 1;
            cursor: pointer;
            color: #aaa;
            background: none;
            border: none;
            transition: color 0.2s;
        }
        
        .close-btn:hover { color: var(--text-color); }

        /* Modern 4:5 Profile Image */
        .profile-img-card {
            width: 160px;
            aspect-ratio: 4/5;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,66,255,0.2);
            margin-bottom: 1rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
            background-color: #eee;
        }

        .profile-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #222;
        }

        .profile-details {
            text-align: left;
            font-size: 0.95rem;
            border-top: 1px solid #eee;
            padding-top: 1rem;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.3rem 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #666;
            font-weight: 500;
        }

        .detail-value {
            font-weight: 700;
            color: #333;
        }

        .status-active { color: var(--success-color); }
        .status-inactive { color: var(--danger-color); }
        
        .rating-box {
            background-color: var(--brand-color);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        /* Footer */
        footer {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 2rem 1rem;
            color: #666;
            font-size: 0.85rem;
        }

        .footer-note {
            margin-bottom: 1.5rem;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #fff;
            display: inline-block;
            font-style: normal;
        }

        .bottom-spacer { height: 3rem; }

    </style>
</head>
<body>

    <div class="container">
        <div class="filter-section">
            <span class="filter-label">List View:</span>
            <select id="player-filter" class="custom-select" onchange="renderRankings()">
                <option value="active" selected>Active Players</option>
                <option value="all">All Players</option>
            </select>
        </div>

        <div class="ranking-header">
            <div class="col-rank">#</div>
            <div class="col-flag">Flag</div>
            <div class="col-title">Title</div>
            <div class="col-player">Player</div>
            <div class="col-rating">Rating</div>
        </div>

        <div id="ranking-list"></div>
    </div>

    <div class="modal-overlay" id="profile-modal">
        <div class="profile-card">
            <button class="close-btn" onclick="closeModal()">&times;</button>
            <img src="" alt="Player Profile" class="profile-img-card" id="modal-img">
            <h2 class="profile-name" id="modal-name">Player Name</h2>
            
            <div class="profile-details">
                <div class="detail-row">
                    <span class="detail-label">FIDE ID:</span>
                    <span class="detail-value" id="modal-id">0000000</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Birth Year:</span>
                    <span class="detail-value" id="modal-birth">1990</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Gender:</span>
                    <span class="detail-value" id="modal-gender">Male</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Title:</span>
                    <span class="detail-value" id="modal-title">GM</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Federation:</span>
                    <span class="detail-value" id="modal-fed">Sri Lanka</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Active Status:</span>
                    <span class="detail-value" id="modal-active">Yes</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Standard Rating:</span>
                    <span class="detail-value rating-box" id="modal-rating">2800</span>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-note" id="dynamic-note">
            </div>
        <p>
            &copy; <span id="year"></span> Chess Saviya
        </p>
    </footer>

    <div class="bottom-spacer"></div>

    <script>
        // Data for Top 40 Sri Lankan Players (Active + Inactive pool for proper filtering)
        const playersData = [
            { name: "Susal Thewjan De Silva", title: "IM", rating: 2405, fedCode: "lk", country: "Sri Lanka", fideId: "9953698", birthYear: 2006, gender: "Male", active: true, img: "https://imgur.com/N8cL934.png?text=Susal" },
            
            { name: "Harsha Aturupane", title: "FM", rating: 2385, fedCode: "lk", country: "Sri Lanka", fideId: "9900012", birthYear: 1960, gender: "Male", active: false, img: "https://imgur.com/JelLQnB.png?text=Harsha" },
            
            { name: "Ranindu Dilshan Liyanage", title: "IM", rating: 2384, fedCode: "lk", country: "Sri Lanka", fideId: "9915834", birthYear: 2003, gender: "Male", active: true, img: "https://imgur.com/0V48XKH.png?text=Ranindu" },
            
            { name: "Harshana Thilakarathne", title: "IM", rating: 2340, fedCode: "lk", country: "Sri Lanka", fideId: "9912053", birthYear: 2003, gender: "Male", active: true, img: "https://imgur.com/RSIEx69.png?text=Harshana" },
            
            { name: "Harinlal Aturupane", title: "FM", rating: 2310, fedCode: "lk", country: "Sri Lanka", fideId: "9900020", birthYear: 1964, gender: "Male", active: false, img: "https://imgur.com/rYCkt2U.png?text=Harinlal" },
            
            { name: "Devindya Oshini Gunawardhana", title: "WIM", rating: 2272, fedCode: "lk", country: "Sri Lanka", fideId: "29941482", birthYear: 2012, gender: "Female", active: true, img: "https://imgur.com/s9eXC6a.png?text=Devindya" },
            
            { name: "Vajira Perera", title: "", rating: 2261, fedCode: "lk", country: "Sri Lanka", fideId: "9900039", birthYear: "N/A", gender: "Male", active: false, img: "https://imgur.com/giYZELT.png?text=Vajira" },
            
            { name: "Deepthi Hewageegane", title: "", rating: 2250, fedCode: "lk", country: "Sri Lanka", fideId: "9900063", birthYear: 1966, gender: "Male", active: false, img: "https://imgur.com/mASkDrD.png?text=Deepthi" },
            
            { name: "Lakshan Fernando", title: "", rating: 2235, fedCode: "lk", country: "Sri Lanka", fideId: "9900071", birthYear: 1968, gender: "Male", active: false, img: "https://placehold.co/160x200/0062FF/ffffff?text=Lakshan" },
            
            { name: "Arjuna Parakrama", title: "", rating: 2225, fedCode: "lk", country: "Sri Lanka", fideId: "9900101", birthYear: 1956, gender: "Male", active: false, img: "https://imgur.com/y0oBj72.png?text=Arjuna" },
            
            { name: "Ishan Weerakoon", title: "", rating: 2210, fedCode: "lk", country: "Sri Lanka", fideId: "9900110", birthYear: "N/A", gender: "Male", active: false, img: "https://placehold.co/160x200/0062FF/ffffff?text=Ishan" },
            
            { name: "P A Mandara", title: "", rating: 2205, fedCode: "lk", country: "Sri Lanka", fideId: "9900209", birthYear: "N/A", gender: "Male", active: false, img: "https://placehold.co/160x200/0062FF/ffffff?text=Mandara" },
            
            { name: "Nuwan Didula De Silva", title: "", rating: 2195, fedCode: "lk", country: "Sri Lanka", fideId: "9900276", birthYear: 1982, gender: "Male", active: false, img: "https://imgur.com/IkOEkXt.png?text=Nuwan" },
            
            { name: "M K A Russell", title: "", rating: 2195, fedCode: "lk", country: "Sri Lanka", fideId: "9900500", birthYear: 1983, gender: "Male", active: true, img: "https://imgur.com/u936Sde.png?text=Russell" },
            
            { name: "L C Goonetilleke", title: "", rating: 2190, fedCode: "lk", country: "Sri Lanka", fideId: "9900047", birthYear: 1958, gender: "Male", active: false, img: "https://imgur.com/Wsmh47D.png?text=Goonetilleke" },
            
            { name: "Akila Amarawickrama", title: "", rating: 2175, fedCode: "lk", country: "Sri Lanka", fideId: "9900152", birthYear: 1973, gender: "Male", active: false, img: "https://placehold.co/160x200/0062FF/ffffff?text=Akila" },
            
             { name: "Himan Udama Amarawickrama", title: "", rating: 2173, fedCode: "lk", country: "Sri Lanka", fideId: "9900225", birthYear: 1974, gender: "Male", active: false, img: "https://placehold.co/160x200/0062FF/ffffff?text=Himan" },
             
              { name: "Sarath Eriyagama", title: "", rating: 2161, fedCode: "lk", country: "Sri Lanka", fideId: "9900179", birthYear: "N/A", gender: "Male", active: false, img: "https://placehold.co/160x200/0062FF/ffffff?text=Sarath" },
              
              { name: "Ravindra Wijesundara", title: "", rating: 2157, fedCode: "lk", country: "Sri Lanka", fideId: "9900160", birthYear: "N/A", gender: "Male", active: false, img: "https://imgur.com/Y47Pkdq.png?text=Wijesundara" },
              
              { name: "R Amarasinghe", title: "", rating: 2149, fedCode: "lk", country: "Sri Lanka", fideId: "9900187", birthYear: 1975, gender: "Male", active: false, img: "https://placehold.co/160x200/0062FF/ffffff?text=Amarasinghe" },
              
              { name: "Pesandu Rashmitha Liyanage", title: "FM", rating: 2146, fedCode: "lk", country: "Sri Lanka", fideId: "9947876", birthYear: 2006, gender: "Male", active: true, img: "https://imgur.com/LgmBjCe.png?text=Pesandu" },
              
              { name: "T H D Thisarindu Induwara", title: "", rating: 2129, fedCode: "lk", country: "Sri Lanka", fideId: "9967001", birthYear: 2010, gender: "Male", active: true, img: "https://imgur.com/BRI05Nn.png?text=Thisarindu" },
            
            { name: "Minul Sanjula Doluweera", title: "FM", rating: 2113, fedCode: "lk", country: "Sri Lanka", fideId: "9910760", birthYear: 2000, gender: "Male", active: true, img: "https://imgur.com/7fphLUA.png?text=Minul" },
            
            { name: "Dishal Nimsara Weerasekara", title: "FM", rating: 2109, fedCode: "lk", country: "Sri Lanka", fideId: "9997431", birthYear: 2010, gender: "Male", active: true, img: "https://imgur.com/N7whSZg.png?text=Dishal" },
            
            { name: "Rajeendra Kalugampitiya", title: "FM", rating: 2066, fedCode: "lk", country: "Sri Lanka", fideId: "9901124", birthYear: 1988, gender: "Male", active: true, img: "https://imgur.com/ahAQrDn.png?text=Ravindra" },
            
            { name: "D D L N Dandeniya", title: "CM", rating: 2056, fedCode: "lk", country: "Sri Lanka", fideId: "29928818", birthYear: 2011, gender: "Male", active: true, img: "https://imgur.com/yvEfEJ6.png?text=DDLN" },
            
            { name: "Chenitha Mithvidu Ovitigala", title: "", rating: 2055, fedCode: "lk", country: "Sri Lanka", fideId: "29950775", birthYear: 2011, gender: "Male", active: true, img: "https://imgur.com/ftiHxuE.png?text=Chenitha" },
            
            { name: "Chenitha Sihas Dinsara", title: "CM", rating: 2054, fedCode: "lk", country: "Sri Lanka", fideId: "29982596", birthYear: 2015, gender: "Male", active: true, img: "https://imgur.com/TgZbisq.png?text=Chenitha" },
            
            { name: "Akila Kavinda", title: "CM", rating: 2053, fedCode: "lk", country: "Sri Lanka", fideId: "9901302", birthYear: 1992, gender: "Male", active: true, img: "https://imgur.com/xTXUbmR.png?text=Akila" },
            
            { name: "M Saith Nipun Piyumantha", title: "FM", rating: 2053, fedCode: "lk", country: "Sri Lanka", fideId: "9916148", birthYear: 2002, gender: "Male", active: true, img: "https://imgur.com/1y7WNd9.png?text=Sasith" },
            
            { name: "K A R G W D R B G​ Galkotuwa", title: "", rating: 2053, fedCode: "lk", country: "Sri Lanka", fideId: "29931789", birthYear: 2011, gender: "Male", active: true, img: "https://placehold.co/160x200/0062FF/ffffff?text=KARGWDRBG" },
            
            { name: "A A H M B Senarathne", title: "", rating: 2043, fedCode: "lk", country: "Sri Lanka", fideId: "9934251", birthYear: 1999, gender: "Male", active: true, img: "https://placehold.co/160x200/0062FF/ffffff?text=AAHMB" },
            
            { name: "S Sivathanujan", title: "CM", rating: 2040, fedCode: "lk", country: "Sri Lanka", fideId: "9977104", birthYear: 2000, gender: "Male", active: true, img: "https://imgur.com/SsjIGiC.png?text=Sivathanujan" },
            
            { name: "Vinuka Dihain​ Wijerathna", title: "CM", rating: 2037, fedCode: "lk", country: "Sri Lanka", fideId: "29981905", birthYear: 2013, gender: "Male", active: true, img: "https://imgur.com/nydEDdH.png?text=Vinuka" },
            
            { name: "V W A Vinuda Vidm", title: "", rating: 2036, fedCode: "lk", country: "Sri Lanka", fideId: "29950520", birthYear: 2011, gender: "Male", active: true, img: "https://placehold.co/160x200/0062FF/ffffff?text=Vinuda" }
        ];

        // Function to render the Rankings
        function renderRankings() {
            const listContainer = document.getElementById('ranking-list');
            const filterType = document.getElementById('player-filter').value;
            const noteContainer = document.getElementById('dynamic-note');
            
            // Clear existing list
            listContainer.innerHTML = '';

            // 1. Filter Logic
            let filteredPlayers = [...playersData];
            
            if (filterType === 'active') {
                filteredPlayers = filteredPlayers.filter(player => player.active === true);
                noteContainer.innerHTML = '<strong>Note:</strong> Showing current top 15 <strong>Active</strong> Sri Lankan players.';
            } else {
                noteContainer.innerHTML = '<strong>Note:</strong> Showing top 15 Sri Lankan players including <strong>Inactive</strong> records.';
            }

            // 2. Sort Logic (Descending by rating)
            filteredPlayers.sort((a, b) => b.rating - a.rating);

            // 3. Render Loop (Max 15 displayed, respecting ties)
            let currentRank = 1;

            for (let i = 0; i < filteredPlayers.length; i++) {
                const player = filteredPlayers[i];

                // Rank Calculation logic
                if (i > 0 && player.rating === filteredPlayers[i - 1].rating) {
                    // Tie: keep same rank
                } else {
                    currentRank = i + 1;
                }

                // Break if we go past rank 15
                if (currentRank > 15) {
                    break;
                }

                // Create Row
                const row = document.createElement('div');
                row.className = 'ranking-row';
                row.onclick = () => openModal(player);

                const flagUrl = `https://flagcdn.com/w40/lk.png`;
                const displayTitle = player.title ? player.title : "";

                // Image Lazy Loading Added
                row.innerHTML = `
                    <div class="col-rank">${currentRank}</div>
                    <div class="col-flag">
                        <img src="${flagUrl}" alt="${player.country}" class="flag-img" loading="lazy" width="24">
                    </div>
                    <div class="col-title">${displayTitle}</div>
                    <div class="col-player">
                        <img src="${player.img}" alt="${player.name}" class="player-img-list" loading="lazy" width="40" height="40">
                        <span class="player-name-text">${player.name}</span>
                    </div>
                    <div class="col-rating">${player.rating}</div>
                `;

                listContainer.appendChild(row);
            }
        }

        // Function to open Modal
        function openModal(player) {
            const modal = document.getElementById('profile-modal');
            const statusColor = player.active ? 'status-active' : 'status-inactive';
            
            document.getElementById('modal-img').src = player.img;
            document.getElementById('modal-name').innerText = player.name;
            document.getElementById('modal-id').innerText = player.fideId;
            document.getElementById('modal-birth').innerText = player.birthYear;
            document.getElementById('modal-gender').innerText = player.gender;
            
            document.getElementById('modal-title').innerText = player.title ? player.title : "None";
            document.getElementById('modal-fed').innerText = player.country;
            document.getElementById('modal-rating').innerText = player.rating;

            const activeElem = document.getElementById('modal-active');
            activeElem.innerText = player.active ? "Yes" : "No";
            activeElem.className = `detail-value ${statusColor}`;

            modal.classList.add('active');
        }

        // Function to close Modal
        function closeModal() {
            document.getElementById('profile-modal').classList.remove('active');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('profile-modal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Set Dynamic Year
        document.getElementById('year').innerText = new Date().getFullYear();

        // Initialize with default filter (Active)
        renderRankings();

    </script>
</body>

</html>

